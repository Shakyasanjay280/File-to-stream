<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ghost Stream - File Access</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white flex items-center justify-center min-h-screen">
    <div class="bg-zinc-900 p-8 rounded-3xl border border-zinc-800 text-center max-w-md w-full shadow-2xl">
        <h2 id="n" class="text-xl font-bold mb-2">Loading...</h2>
        <p id="s" class="text-zinc-500 mb-6"></p>
        <a id="d" href="#" class="block bg-red-600 hover:bg-red-500 p-4 rounded-2xl font-bold mb-4">⬇️ Download File</a>
        <p class="text-xs text-zinc-600">Private & Secure Streaming by Ghost</p>
    </div>
    <script>
        const id = window.location.pathname.split("/").pop();
        fetch(`/api/file/${id}`).then(r => r.json()).then(d => {
            document.getElementById('n').innerText = d.file_name;
            document.getElementById('s').innerText = d.file_size;
            document.getElementById('d').href = d.direct_dl_link;
        });
    </script>
</body>
</html>
        if (!res.ok) throw new Error();

        const data = await res.json();
        document.title = data.file_name;

        fileNameEl.innerText = data.file_name;
        fileSizeEl.innerText = `Size • ${data.file_size}`;

        buttonContainer.innerHTML = "";

        if (data.is_media) {
            const mx = `intent:${data.direct_dl_link}#Intent;action=android.intent.action.VIEW;type=video/*;end`;
            const vlc = `intent:${data.direct_dl_link}#Intent;action=android.intent.action.VIEW;type=video/*;package=org.videolan.vlc;end`;

            buttonContainer.innerHTML = `
                <a href="${data.direct_dl_link}" class="btn btn-primary">⬇ Download Now</a>
                <a href="${mx}" class="btn btn-secondary">▶ Play in MX Player</a>
                <a href="${vlc}" class="btn btn-secondary">▶ Play in VLC</a>
            `;
        } else {
            buttonContainer.innerHTML = `
                <a href="${data.direct_dl_link}" class="btn btn-primary">⬇ Download File</a>
            `;
        }

        loader.style.display = "none";
        content.style.display = "block";

    } catch {
        loader.innerHTML = "<p class='text-red-400'>❌ Link expired or invalid</p>";
    }
}

fetchFileData();
document.addEventListener("contextmenu", e => e.preventDefault());
</script>

</body>
</html>
